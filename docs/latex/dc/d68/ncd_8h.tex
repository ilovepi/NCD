\hypertarget{ncd_8h}{\section{ncd.\-h File Reference}
\label{ncd_8h}\index{ncd.\-h@{ncd.\-h}}
}
{\ttfamily \#include $<$stdio.\-h$>$}\\*
{\ttfamily \#include $<$stdlib.\-h$>$}\\*
{\ttfamily \#include $<$string.\-h$>$}\\*
{\ttfamily \#include $<$sys/time.\-h$>$}\\*
{\ttfamily \#include $<$errno.\-h$>$}\\*
{\ttfamily \#include $<$sys/socket.\-h$>$}\\*
{\ttfamily \#include $<$netdb.\-h$>$}\\*
{\ttfamily \#include $<$arpa/inet.\-h$>$}\\*
{\ttfamily \#include $<$signal.\-h$>$}\\*
{\ttfamily \#include $<$fcntl.\-h$>$}\\*
{\ttfamily \#include $<$unistd.\-h$>$}\\*
{\ttfamily \#include $<$ctype.\-h$>$}\\*
{\ttfamily \#include $<$pthread.\-h$>$}\\*
{\ttfamily \#include $<$netinet/ip.\-h$>$}\\*
{\ttfamily \#include $<$netinet/ip6.\-h$>$}\\*
{\ttfamily \#include $<$netinet/ip\-\_\-icmp.\-h$>$}\\*
{\ttfamily \#include $<$netinet/icmp6.\-h$>$}\\*
{\ttfamily \#include $<$netinet/udp.\-h$>$}\\*
\subsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{structpseudo__header}{pseudo\-\_\-header}
\begin{DoxyCompactList}\small\item\em struct for udp pseudo header \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{ncd_8h_a564ea801faec77e3835f72bc584e3969}{\-\_\-\-\_\-\-U\-S\-E\-\_\-\-B\-S\-D}
\begin{DoxyCompactList}\small\item\em Favor the B\-S\-D style U\-D\-P \& I\-P headers. \end{DoxyCompactList}\item 
\#define \hyperlink{ncd_8h_a0e25ec3d9c374c5e6dceeb9341baf766}{\-\_\-\-\_\-\-F\-A\-V\-O\-R\-\_\-\-B\-S\-D}
\item 
\#define \hyperlink{ncd_8h_a70ed59adcb4159ac551058053e649640}{S\-I\-Z\-E}~(1500-\/40-\/8-\/2)
\begin{DoxyCompactList}\small\item\em maximum ip packet size 1500 bytes Ethernet max size 40 I\-Pv6 header max size 8 U\-D\-P header 2 16-\/bit packet I\-D \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int \hyperlink{ncd_8h_a7da9feca0e536478b6a79b0e4974a8d6}{comp\-\_\-det} ()
\begin{DoxyCompactList}\small\item\em Determines if compression occurs along the current transmission path to host by sending data to a remote location. \end{DoxyCompactList}\item 
int \hyperlink{ncd_8h_a9c361136c836098ee919436b5edf77aa}{mkipv4} (void $\ast$buff, size\-\_\-t size, struct addrinfo $\ast$\hyperlink{ncd_8c_a8df42e4f21cb586ea4981025137520e0}{res}, u\-\_\-int8\-\_\-t proto)
\begin{DoxyCompactList}\small\item\em Formats an ipv4 header beginning at buff of length size. \end{DoxyCompactList}\item 
int \hyperlink{ncd_8h_ac35b8012c32dd6ff2fa7efa928f33692}{mkipv6} (void $\ast$buff, size\-\_\-t size, struct addrinfo $\ast$\hyperlink{ncd_8c_a8df42e4f21cb586ea4981025137520e0}{res}, u\-\_\-int8\-\_\-t proto)
\item 
int \hyperlink{ncd_8h_ac3e68891fcccd5a71c8b12ed78943313}{mkudphdr} (void $\ast$buff, size\-\_\-t udp\-\_\-data\-\_\-len, u\-\_\-int8\-\_\-t proto)
\begin{DoxyCompactList}\small\item\em formats an udp header beginning at buff with a payload of length udp\-\_\-data\-\_\-len \end{DoxyCompactList}\item 
int \hyperlink{ncd_8h_a9248ef96d5f84b0a6fada680529a029c}{mkicmpv4} (void $\ast$buff, size\-\_\-t datalen)
\begin{DoxyCompactList}\small\item\em formats an I\-C\-M\-P packet beginning at buff with a payload of length datalen \end{DoxyCompactList}\item 
int \hyperlink{ncd_8h_a2eada3fc40a96989ac7e16e256f84240}{mkicmpv6} (void $\ast$buff, size\-\_\-t datalen)
\item 
void \hyperlink{ncd_8h_a115536db290a1c30ffbc2c07e0db5fbf}{fill\-\_\-data} (void $\ast$buff, size\-\_\-t size)
\begin{DoxyCompactList}\small\item\em fills the data portion of a packet with the size data from a file char$\ast$ file \end{DoxyCompactList}\item 
void $\ast$ \hyperlink{ncd_8h_a951a5d1c4d59b79654a5bb53a7eb65d0}{send\-\_\-train} (void $\ast$num)
\begin{DoxyCompactList}\small\item\em sends the udp data train with leading and trailing I\-C\-M\-P messages \end{DoxyCompactList}\item 
void $\ast$ \hyperlink{ncd_8h_aaa584eddd915ff9cc908280b49b5cc60}{recv4} (void $\ast$t)
\begin{DoxyCompactList}\small\item\em Receives I\-C\-M\-P responses from end host and records times. \end{DoxyCompactList}\item 
void $\ast$ \hyperlink{ncd_8h_a1a25afec74c6238073a2be4d3896b722}{recv6} (void $\ast$t)
\item 
uint16\-\_\-t \hyperlink{ncd_8h_a6e25195727f4483c9e7224de02cb55be}{ip\-\_\-checksum} (void $\ast$vdata, size\-\_\-t length)
\begin{DoxyCompactList}\small\item\em calculates the ip cheksum for some buffer of size length \end{DoxyCompactList}\item 
int \hyperlink{ncd_8h_a91ffa5784a46ec2b471bf3ba8c1aa870}{check\-\_\-args} (int argc, char $\ast$argv\mbox{[}$\,$\mbox{]})
\begin{DoxyCompactList}\small\item\em Checks arguments given on command line and stores values in global variables. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Macro Definition Documentation}
\hypertarget{ncd_8h_a0e25ec3d9c374c5e6dceeb9341baf766}{\index{ncd.\-h@{ncd.\-h}!\-\_\-\-\_\-\-F\-A\-V\-O\-R\-\_\-\-B\-S\-D@{\-\_\-\-\_\-\-F\-A\-V\-O\-R\-\_\-\-B\-S\-D}}
\index{\-\_\-\-\_\-\-F\-A\-V\-O\-R\-\_\-\-B\-S\-D@{\-\_\-\-\_\-\-F\-A\-V\-O\-R\-\_\-\-B\-S\-D}!ncd.h@{ncd.\-h}}
\subsubsection[{\-\_\-\-\_\-\-F\-A\-V\-O\-R\-\_\-\-B\-S\-D}]{\setlength{\rightskip}{0pt plus 5cm}\#define \-\_\-\-\_\-\-F\-A\-V\-O\-R\-\_\-\-B\-S\-D}}\label{ncd_8h_a0e25ec3d9c374c5e6dceeb9341baf766}


Definition at line 32 of file ncd.\-h.

\hypertarget{ncd_8h_a564ea801faec77e3835f72bc584e3969}{\index{ncd.\-h@{ncd.\-h}!\-\_\-\-\_\-\-U\-S\-E\-\_\-\-B\-S\-D@{\-\_\-\-\_\-\-U\-S\-E\-\_\-\-B\-S\-D}}
\index{\-\_\-\-\_\-\-U\-S\-E\-\_\-\-B\-S\-D@{\-\_\-\-\_\-\-U\-S\-E\-\_\-\-B\-S\-D}!ncd.h@{ncd.\-h}}
\subsubsection[{\-\_\-\-\_\-\-U\-S\-E\-\_\-\-B\-S\-D}]{\setlength{\rightskip}{0pt plus 5cm}\#define \-\_\-\-\_\-\-U\-S\-E\-\_\-\-B\-S\-D}}\label{ncd_8h_a564ea801faec77e3835f72bc584e3969}


Favor the B\-S\-D style U\-D\-P \& I\-P headers. 



Definition at line 29 of file ncd.\-h.

\hypertarget{ncd_8h_a70ed59adcb4159ac551058053e649640}{\index{ncd.\-h@{ncd.\-h}!S\-I\-Z\-E@{S\-I\-Z\-E}}
\index{S\-I\-Z\-E@{S\-I\-Z\-E}!ncd.h@{ncd.\-h}}
\subsubsection[{S\-I\-Z\-E}]{\setlength{\rightskip}{0pt plus 5cm}\#define S\-I\-Z\-E~(1500-\/40-\/8-\/2)}}\label{ncd_8h_a70ed59adcb4159ac551058053e649640}


maximum ip packet size 1500 bytes Ethernet max size 40 I\-Pv6 header max size 8 U\-D\-P header 2 16-\/bit packet I\-D 



Definition at line 50 of file ncd.\-h.



\subsection{Function Documentation}
\hypertarget{ncd_8h_a91ffa5784a46ec2b471bf3ba8c1aa870}{\index{ncd.\-h@{ncd.\-h}!check\-\_\-args@{check\-\_\-args}}
\index{check\-\_\-args@{check\-\_\-args}!ncd.h@{ncd.\-h}}
\subsubsection[{check\-\_\-args}]{\setlength{\rightskip}{0pt plus 5cm}int check\-\_\-args (
\begin{DoxyParamCaption}
\item[{int}]{argc, }
\item[{char $\ast$}]{argv\mbox{[}$\,$\mbox{]}}
\end{DoxyParamCaption}
)}}\label{ncd_8h_a91ffa5784a46ec2b471bf3ba8c1aa870}


Checks arguments given on command line and stores values in global variables. 


\begin{DoxyParams}{Parameters}
{\em argc} & number of command line args \\
\hline
{\em argv} & array of commandline args \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 success, 1 Failure 
\end{DoxyReturn}


Definition at line 621 of file ncd.\-c.

\hypertarget{ncd_8h_a7da9feca0e536478b6a79b0e4974a8d6}{\index{ncd.\-h@{ncd.\-h}!comp\-\_\-det@{comp\-\_\-det}}
\index{comp\-\_\-det@{comp\-\_\-det}!ncd.h@{ncd.\-h}}
\subsubsection[{comp\-\_\-det}]{\setlength{\rightskip}{0pt plus 5cm}int comp\-\_\-det (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{ncd_8h_a7da9feca0e536478b6a79b0e4974a8d6}


Determines if compression occurs along the current transmission path to host by sending data to a remote location. 

Two data trains are sent each with leading and trailing I\-C\-M\-P timestamp messages.

The first data train will be low entropy data, to encourage compression, while the second train will have high entropy data, which should not be compressed well. If the times are significantly different, we have reasonable evidence compression exists along this path.

\begin{DoxyReturn}{Returns}
0 success, 1 error/failure 
\end{DoxyReturn}


Definition at line 59 of file ncd.\-c.

\hypertarget{ncd_8h_a115536db290a1c30ffbc2c07e0db5fbf}{\index{ncd.\-h@{ncd.\-h}!fill\-\_\-data@{fill\-\_\-data}}
\index{fill\-\_\-data@{fill\-\_\-data}!ncd.h@{ncd.\-h}}
\subsubsection[{fill\-\_\-data}]{\setlength{\rightskip}{0pt plus 5cm}void fill\-\_\-data (
\begin{DoxyParamCaption}
\item[{void $\ast$}]{buff, }
\item[{size\-\_\-t}]{size}
\end{DoxyParamCaption}
)}}\label{ncd_8h_a115536db290a1c30ffbc2c07e0db5fbf}


fills the data portion of a packet with the size data from a file char$\ast$ file 


\begin{DoxyParams}{Parameters}
{\em buff} & Address of the starting location for the data \\
\hline
{\em size} & The length of the data region \\
\hline
\end{DoxyParams}


Definition at line 384 of file ncd.\-c.

\hypertarget{ncd_8h_a6e25195727f4483c9e7224de02cb55be}{\index{ncd.\-h@{ncd.\-h}!ip\-\_\-checksum@{ip\-\_\-checksum}}
\index{ip\-\_\-checksum@{ip\-\_\-checksum}!ncd.h@{ncd.\-h}}
\subsubsection[{ip\-\_\-checksum}]{\setlength{\rightskip}{0pt plus 5cm}uint16\-\_\-t ip\-\_\-checksum (
\begin{DoxyParamCaption}
\item[{void $\ast$}]{vdata, }
\item[{size\-\_\-t}]{length}
\end{DoxyParamCaption}
)}}\label{ncd_8h_a6e25195727f4483c9e7224de02cb55be}


calculates the ip cheksum for some buffer of size length 


\begin{DoxyParams}{Parameters}
{\em vdata} & a pointer to the buffer to be checksummed \\
\hline
{\em length} & the length in bytes of the data to be checksummed \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the I\-P checksum of the buffer 
\end{DoxyReturn}


Definition at line 560 of file ncd.\-c.

\hypertarget{ncd_8h_a9248ef96d5f84b0a6fada680529a029c}{\index{ncd.\-h@{ncd.\-h}!mkicmpv4@{mkicmpv4}}
\index{mkicmpv4@{mkicmpv4}!ncd.h@{ncd.\-h}}
\subsubsection[{mkicmpv4}]{\setlength{\rightskip}{0pt plus 5cm}int mkicmpv4 (
\begin{DoxyParamCaption}
\item[{void $\ast$}]{buff, }
\item[{size\-\_\-t}]{datalen}
\end{DoxyParamCaption}
)}}\label{ncd_8h_a9248ef96d5f84b0a6fada680529a029c}


formats an I\-C\-M\-P packet beginning at buff with a payload of length datalen 


\begin{DoxyParams}{Parameters}
{\em buff} & Address of the starting location for the I\-C\-M\-P packet \\
\hline
{\em datalen} & The length of the I\-C\-M\-P payload \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Returns an integer value for success(0), failure(1), or error(-\/1) 
\end{DoxyReturn}


Definition at line 309 of file ncd.\-c.

\hypertarget{ncd_8h_a2eada3fc40a96989ac7e16e256f84240}{\index{ncd.\-h@{ncd.\-h}!mkicmpv6@{mkicmpv6}}
\index{mkicmpv6@{mkicmpv6}!ncd.h@{ncd.\-h}}
\subsubsection[{mkicmpv6}]{\setlength{\rightskip}{0pt plus 5cm}int mkicmpv6 (
\begin{DoxyParamCaption}
\item[{void $\ast$}]{buff, }
\item[{size\-\_\-t}]{datalen}
\end{DoxyParamCaption}
)}}\label{ncd_8h_a2eada3fc40a96989ac7e16e256f84240}


Definition at line 324 of file ncd.\-c.

\hypertarget{ncd_8h_a9c361136c836098ee919436b5edf77aa}{\index{ncd.\-h@{ncd.\-h}!mkipv4@{mkipv4}}
\index{mkipv4@{mkipv4}!ncd.h@{ncd.\-h}}
\subsubsection[{mkipv4}]{\setlength{\rightskip}{0pt plus 5cm}int mkipv4 (
\begin{DoxyParamCaption}
\item[{void $\ast$}]{buff, }
\item[{size\-\_\-t}]{size, }
\item[{struct addrinfo $\ast$}]{res, }
\item[{u\-\_\-int8\-\_\-t}]{proto}
\end{DoxyParamCaption}
)}}\label{ncd_8h_a9c361136c836098ee919436b5edf77aa}


Formats an ipv4 header beginning at buff of length size. 


\begin{DoxyParams}{Parameters}
{\em buff} & Address of the starting location for the I\-P packet \\
\hline
{\em size} & The length of the I\-P packet \\
\hline
{\em res} & A pointer to a struct addrinfo -- from getaddrinfo() \\
\hline
{\em proto} & The 8-\/bit protocol \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Returns an integer value for success(0), failure(1), or error(-\/1) 
\end{DoxyReturn}


Definition at line 248 of file ncd.\-c.

\hypertarget{ncd_8h_ac35b8012c32dd6ff2fa7efa928f33692}{\index{ncd.\-h@{ncd.\-h}!mkipv6@{mkipv6}}
\index{mkipv6@{mkipv6}!ncd.h@{ncd.\-h}}
\subsubsection[{mkipv6}]{\setlength{\rightskip}{0pt plus 5cm}int mkipv6 (
\begin{DoxyParamCaption}
\item[{void $\ast$}]{buff, }
\item[{size\-\_\-t}]{size, }
\item[{struct addrinfo $\ast$}]{res, }
\item[{u\-\_\-int8\-\_\-t}]{proto}
\end{DoxyParamCaption}
)}}\label{ncd_8h_ac35b8012c32dd6ff2fa7efa928f33692}


Definition at line 266 of file ncd.\-c.

\hypertarget{ncd_8h_ac3e68891fcccd5a71c8b12ed78943313}{\index{ncd.\-h@{ncd.\-h}!mkudphdr@{mkudphdr}}
\index{mkudphdr@{mkudphdr}!ncd.h@{ncd.\-h}}
\subsubsection[{mkudphdr}]{\setlength{\rightskip}{0pt plus 5cm}int mkudphdr (
\begin{DoxyParamCaption}
\item[{void $\ast$}]{buff, }
\item[{size\-\_\-t}]{udp\-\_\-data\-\_\-len, }
\item[{u\-\_\-int8\-\_\-t}]{proto}
\end{DoxyParamCaption}
)}}\label{ncd_8h_ac3e68891fcccd5a71c8b12ed78943313}


formats an udp header beginning at buff with a payload of length udp\-\_\-data\-\_\-len 


\begin{DoxyParams}{Parameters}
{\em buff} & Address of the starting location for the U\-D\-P packet \\
\hline
{\em udp\-\_\-data\-\_\-len} & The length of the U\-D\-P payload \\
\hline
{\em proto} & The 8-\/bit protocol \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Returns an integer value for success(0), failure(1), or error(-\/1) 
\end{DoxyReturn}


Definition at line 279 of file ncd.\-c.

\hypertarget{ncd_8h_aaa584eddd915ff9cc908280b49b5cc60}{\index{ncd.\-h@{ncd.\-h}!recv4@{recv4}}
\index{recv4@{recv4}!ncd.h@{ncd.\-h}}
\subsubsection[{recv4}]{\setlength{\rightskip}{0pt plus 5cm}void$\ast$ recv4 (
\begin{DoxyParamCaption}
\item[{void $\ast$}]{t}
\end{DoxyParamCaption}
)}}\label{ncd_8h_aaa584eddd915ff9cc908280b49b5cc60}


Receives I\-C\-M\-P responses from end host and records times. 


\begin{DoxyParams}{Parameters}
{\em t} & pointer to a double. returns the time in ms between head echo response and first processed tail echo response to a resolution of microseconds (10$^\wedge$-\/6 sec) \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 success, 1 error/failure 
\end{DoxyReturn}


Definition at line 401 of file ncd.\-c.

\hypertarget{ncd_8h_a1a25afec74c6238073a2be4d3896b722}{\index{ncd.\-h@{ncd.\-h}!recv6@{recv6}}
\index{recv6@{recv6}!ncd.h@{ncd.\-h}}
\subsubsection[{recv6}]{\setlength{\rightskip}{0pt plus 5cm}void$\ast$ recv6 (
\begin{DoxyParamCaption}
\item[{void $\ast$}]{t}
\end{DoxyParamCaption}
)}}\label{ncd_8h_a1a25afec74c6238073a2be4d3896b722}


Definition at line 495 of file ncd.\-c.

\hypertarget{ncd_8h_a951a5d1c4d59b79654a5bb53a7eb65d0}{\index{ncd.\-h@{ncd.\-h}!send\-\_\-train@{send\-\_\-train}}
\index{send\-\_\-train@{send\-\_\-train}!ncd.h@{ncd.\-h}}
\subsubsection[{send\-\_\-train}]{\setlength{\rightskip}{0pt plus 5cm}void$\ast$ send\-\_\-train (
\begin{DoxyParamCaption}
\item[{void $\ast$}]{num}
\end{DoxyParamCaption}
)}}\label{ncd_8h_a951a5d1c4d59b79654a5bb53a7eb65d0}


sends the udp data train with leading and trailing I\-C\-M\-P messages 

\begin{DoxyReturn}{Returns}
integer value cast to void$\ast$. 0 success, 1 error/failure 
\end{DoxyReturn}

\begin{DoxyParams}{Parameters}
{\em num} & number of tail icmp messages to send \\
\hline
\end{DoxyParams}


Definition at line 339 of file ncd.\-c.

